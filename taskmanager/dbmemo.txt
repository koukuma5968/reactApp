mysql -u root -p
mysql -u taskmnguser -p

root
Kosuke&5968dbRoo

create database taskmngdb;

use taskmngdb
SHOW TABLES FROM taskmngdb;

CREATE USER 'taskmnguser'@'192.168.%' IDENTIFIED BY 'taskMng&01';
GRANT ALL ON taskmngdb.* TO 'taskmnguser'@'192.168.%';

drop user 'taskmnguser'@'192.168.*';

SHOW GRANTS for taskmnguser@'192.168.%';
SHOW COLUMNS FROM PROJECT_MNG;

// �v���W�F�N�g�Ǘ�
CREATE TABLE PROJECT_MNG (
ID int NOT NULL AUTO_INCREMENT, 
NAME varchar(100) NOT NULL, 
STARTDAY CHAR(8) NOT NULL, 
ENDDAY CHAR(8) NOT NULL, 
GROUP_ID int NOT NULL, 
REG_DATE datetime DEFAULT CURRENT_TIMESTAMP, 
UP_DATE datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, 
PRIMARY KEY(ID));

SELECT DATE_FORMAT(STARTDAY, '%Y/%m/%d') FROM PROJECT_MNG;

// ���[�U�[�Ǘ�
CREATE TABLE USER_MNG (
GATE_KEY CHAR(36) NOT NULL,
USER_ID varchar(50) NOT NULL, 
EMAIL_ADD varchar(100) NOT NULL,
FAMILY_NAME varchar(50) NOT NULL, 
FIRST_NAME varchar(50) NOT NULL, 
PASS_ENC varchar(100) NOT NULL,
REG_DATE datetime DEFAULT CURRENT_TIMESTAMP, 
UP_DATE datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, 
PRIMARY KEY(GATE_KEY,USER_ID,EMAIL_ADD));

// �O���[�v�Ǘ�
CREATE TABLE GROUP_MNG (
ID int NOT NULL, 
NAME varchar(100) NOT NULL, 
GATE_KEY CHAR(36) NOT NULL,
SCOPE int NOT NULL, 
PRIMARY KEY(ID));

SELECT * FROM GROUP_MNG;

// �O���[�v������
CREATE TABLE GROUP_AUTHORITY (
GROUP_ID int NOT NULL, 
GATE_KEY CHAR(36) NOT NULL,
AUTHORITY_LEVEL int NOT NULL DEFAULT 0,
FOREIGN KEY FK_GROUP_ID(GROUP_ID) REFERENCES GROUP_MNG(ID),
FOREIGN KEY FK_GATE_KEY(GATE_KEY) REFERENCES USER_MNG(GATE_KEY));

// �v���Z�X�Ǘ�
CREATE TABLE PROCESS_MNG (
ID int NOT NULL AUTO_INCREMENT, 
NAME varchar(100) NOT NULL, 
PROJECT_ID int NOT NULL,
PROC int NOT NULL,
PRIMARY KEY(ID,NAME),
FOREIGN KEY FK_PROJECT_ID(PROJECT_ID) REFERENCES PROJECT_MNG(ID));


// �^�X�N�Ǘ�
CREATE TABLE TASK_MNG (
ID int NOT NULL AUTO_INCREMENT, 
NAME varchar(100) NOT NULL, 
PROJECT_ID int NOT NULL,
STATUS int NOT NULL,
PROC int NOT NULL,
STARTDAY CHAR(8) NOT NULL, 
ENDDAY CHAR(8) NOT NULL, 
PRIMARY KEY(ID,NAME),
FOREIGN KEY FK_PROJECT_ID(PROJECT_ID) REFERENCES PROJECT_MNG(ID));
